<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Using PHP in the browser | wp-playground</title><meta name="description" content="Documentation for wp-playground"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script async src="../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../assets/pages.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base="..">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">wp-playground</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<ul class="tsd-breadcrumb">
<li><a href="../modules.html">wp-playground</a></li>
<li><span>Playground</span></li>
<li><a href="using-php-in-the-browser.html">Using PHP in the browser</a></li></ul>
<h1> Using PHP in the browser</h1></div>
<div class="tsd-panel tsd-typography">
<a href="#running-php-apps-in-the-browser-with-serviceworkers-and-worker-threads" id="running-php-apps-in-the-browser-with-serviceworkers-and-worker-threads" style="color: inherit; text-decoration: none;">
  <h1>Running PHP apps in the browser with ServiceWorkers and Worker Threads</h1>
</a>
<p>The <a href="https://github.com/WordPress/wordpress-playground/blob/trunk/packages/php-wasm/web/"><code>php-wasm-web</code></a> module provides a framework for running real PHP applications inside the web browser:</p>
<ul>
<li><strong>Browser tab orchestrates everything</strong> – The browser tab is the main program. Closing or reloading it means destroying the entire execution environment.</li>
<li><strong>Iframe-based rendering</strong> – Every response produced by the PHP server must be rendered in an iframe to avoid reloading the browser tab when the user clicks on a link.</li>
<li><strong>PHP Worker Thread</strong> – The PHP server is slow and must run in a worker thread, otherwise handling requests freezes the website UI.</li>
<li><strong>Service Worker routing</strong> – All HTTP requests originating in that iframe must be intercepted by a Service worker and passed on to the PHP worker thread for rendering.</li>
</ul>
<p>See also the <a href="api/web.html">API Reference</a></p>

<a href="#browser-tab-orchestrates-the-execution" id="browser-tab-orchestrates-the-execution" style="color: inherit; text-decoration: none;">
  <h2>Browser tab orchestrates the execution</h2>
</a>
<p>The main <code>index.html</code> ties the entire application together. It starts all the concurrent processes and displays the PHP responses. The app only lives as long as the main <code>index.html</code>.</p>
<p>Keep this point in mind as you read through the rest of the docs. At this point it may seem obvious, by the lines may get blurry later on. This package runs code outside of the browser tab using Web Workers, Service Workers, and, in the future, Shared Workers. Some of these workers may keep running even after the browser tab with <code>index.html</code> is closed.</p>

<a href="#boot-sequence" id="boot-sequence" style="color: inherit; text-decoration: none;">
  <h3>Boot sequence</h3>
</a>
<p>Here&#39;s what a boot sequence for a minimal app looks like:</p>
<p><img src="https://raw.githubusercontent.com/wordpress/wordpress-playground/trunk/pages/boot-sequence.png" alt="The boot sequence"></p>
<p>The main app initiates the Iframe, the Service Worker, and the Worker Thread. Note how the main app doesn&#39;t use the PHP stack directly – it&#39;s all handled in the Worker Thread.</p>
<p>Here&#39;s what that boot sequence looks like in code:</p>
<p><strong>/index.html</strong>:</p>
<pre><code class="language-js"><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-2"> </span><span class="hl-3">src</span><span class="hl-2">=</span><span class="hl-8">&quot;/app.ts&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">iframe</span><span class="hl-2"> </span><span class="hl-3">id</span><span class="hl-2">=</span><span class="hl-8">&quot;my-app&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">iframe</span><span class="hl-0">&gt;</span>
</code></pre>
<p><strong>/app.ts</strong>:</p>
<pre><code class="language-ts"><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">consumeAPI</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">PHPClient</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">recommendedWorkerBackend</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">registerServiceWorker</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">spawnPHPWorkerThread</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">workerUrl</span><span class="hl-2"> = </span><span class="hl-8">&#39;/worker-thread.js&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">export</span><span class="hl-2"> </span><span class="hl-9">async</span><span class="hl-2"> </span><span class="hl-9">function</span><span class="hl-2"> </span><span class="hl-11">startApp</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">phpClient</span><span class="hl-2"> = </span><span class="hl-11">consumeAPI</span><span class="hl-2">&lt;</span><span class="hl-14">PHPClient</span><span class="hl-2">&gt;(</span><br/><span class="hl-2">        </span><span class="hl-11">spawnPHPWorkerThread</span><span class="hl-2">(</span><br/><span class="hl-2">            </span><span class="hl-8">&#39;/worker-thread.js&#39;</span><span class="hl-2">, </span><span class="hl-12">// Valid Worker script URL</span><br/><span class="hl-2">            </span><span class="hl-7">recommendedWorkerBackend</span><span class="hl-2">, </span><span class="hl-12">// &quot;webworker&quot; or &quot;iframe&quot;, see the docstring</span><br/><span class="hl-2">            { </span><span class="hl-7">phpVersion:</span><span class="hl-2"> </span><span class="hl-8">&#39;7.4&#39;</span><span class="hl-2"> } </span><span class="hl-12">// Startup options</span><br/><span class="hl-2">        )</span><br/><span class="hl-2">    );</span><br/><br/><span class="hl-2">    </span><span class="hl-12">// Await the two-way communication channel</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">phpClient</span><span class="hl-2">.</span><span class="hl-11">isReady</span><span class="hl-2">();</span><br/><br/><span class="hl-2">    </span><span class="hl-12">// Must point to a valid Service Worker script:</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-11">registerServiceWorker</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-7">phpClient</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;default&#39;</span><span class="hl-2">, </span><span class="hl-12">// PHP instance scope, keep reading to learn more.</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;/sw.js&#39;</span><span class="hl-2">, </span><span class="hl-12">// Valid Service Worker script URL.</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;1&#39;</span><span class="hl-2"> </span><span class="hl-12">// Service worker version, used for reloading the script.</span><br/><span class="hl-2">    );</span><br/><br/><span class="hl-2">    </span><span class="hl-12">// Create a few PHP files to browse:</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">workerThread</span><span class="hl-2">.</span><span class="hl-11">writeFile</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;/index.php&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;&lt;a href=&quot;page.php&quot;&gt;Go to page.php&lt;/a&gt;&#39;</span><br/><span class="hl-2">    );</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">workerThread</span><span class="hl-2">.</span><span class="hl-11">writeFile</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;/page.php&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;&lt;?php echo &quot;Hello from PHP!&quot;; ?&gt;&#39;</span><br/><span class="hl-2">    );</span><br/><br/><span class="hl-2">    </span><span class="hl-12">// Navigate to index.php:</span><br/><span class="hl-2">    </span><span class="hl-7">document</span><span class="hl-2">.</span><span class="hl-11">getElementById</span><span class="hl-2">(</span><span class="hl-8">&#39;my-app&#39;</span><span class="hl-2">).</span><span class="hl-7">src</span><span class="hl-2"> =</span><br/><span class="hl-2">        </span><span class="hl-7">playground</span><span class="hl-2">.</span><span class="hl-11">pathToInternalUrl</span><span class="hl-2">(</span><span class="hl-8">&#39;/index.php&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">}</span><br/><span class="hl-11">startApp</span><span class="hl-2">();</span>
</code></pre>
<p><strong>/worker-thread.js</strong>:</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">PHP</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">PHPClient</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">setURLScope</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">exposeAPI</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">parseWorkerStartupOptions</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-12">// Random scope</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">scope</span><span class="hl-2"> = </span><span class="hl-7">Math</span><span class="hl-2">.</span><span class="hl-11">random</span><span class="hl-2">().</span><span class="hl-11">toFixed</span><span class="hl-2">(</span><span class="hl-13">16</span><span class="hl-2">);</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">scopedSiteUrl</span><span class="hl-2"> = </span><span class="hl-11">setURLScope</span><span class="hl-2">(</span><span class="hl-6">import</span><span class="hl-2">.</span><span class="hl-7">meta</span><span class="hl-2">.</span><span class="hl-7">url</span><span class="hl-2">, </span><span class="hl-7">scope</span><span class="hl-2">).</span><span class="hl-11">toString</span><span class="hl-2">();</span><br/><br/><span class="hl-9">const</span><span class="hl-2"> { </span><span class="hl-10">phpVersion</span><span class="hl-2"> } = </span><span class="hl-11">parseWorkerStartupOptions</span><span class="hl-2">&lt;{ </span><span class="hl-7">phpVersion</span><span class="hl-2">?: </span><span class="hl-14">string</span><span class="hl-2"> }&gt;();</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">php</span><span class="hl-2"> = </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-10">PHP</span><span class="hl-2">.</span><span class="hl-11">load</span><span class="hl-2">(</span><span class="hl-8">&#39;8.0&#39;</span><span class="hl-2">, {</span><br/><span class="hl-2">    </span><span class="hl-7">requestHandler:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-7">documentRoot:</span><span class="hl-2"> </span><span class="hl-8">&#39;/&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-7">absoluteUrl:</span><span class="hl-2"> </span><span class="hl-7">scopedSiteUrl</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-12">// Expose the API to app.ts:</span><br/><span class="hl-12">// It will listens to commands issued by the main app and</span><br/><span class="hl-12">// the requests from the Service Worker.</span><br/><span class="hl-9">const</span><span class="hl-2"> [</span><span class="hl-10">setApiReady</span><span class="hl-2">, ] = </span><span class="hl-11">exposeAPI</span><span class="hl-2">( </span><span class="hl-9">new</span><span class="hl-2"> </span><span class="hl-11">PHPClient</span><span class="hl-2">( </span><span class="hl-7">php</span><span class="hl-2"> ) );</span><br/><span class="hl-11">setApiReady</span><span class="hl-2">();</span>
</code></pre>
<p><strong>/service-worker.js</strong>:</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> { </span><span class="hl-7">initializeServiceWorker</span><span class="hl-2"> } </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-12">// Intercepts all HTTP traffic on the current domain and</span><br/><span class="hl-12">// passes it to the Worker Thread.</span><br/><span class="hl-11">initializeServiceWorker</span><span class="hl-2">();</span>
</code></pre>
<p>Keep reading to learn how all these pieces fit together.</p>

<a href="#data-flow" id="data-flow" style="color: inherit; text-decoration: none;">
  <h3>Data flow</h3>
</a>
<p>Here&#39;s what happens whenever the iframe issues a same-domain request:</p>
<p><img src="https://raw.githubusercontent.com/wordpress/wordpress-playground/trunk/pages/data-flow.png" alt="The data flow"></p>
<p>A step-by-step breakown:</p>
<ol>
<li>The request is intercepted by the Service Worker</li>
<li>The Service Worker passes it to the Worker Thread</li>
<li>The Worker Thread calls <code>PHP.request</code> to convert that request to a response</li>
<li>The Worker Thread passes the response to the Service Worker</li>
<li>The Service Worker provides the browser with a response</li>
</ol>
<p>At this point, if the request was triggered by user clicking on a link, the browser will render PHPRequestHandler&#39;s response inside the iframe.</p>

<a href="#iframe-based-rendering" id="iframe-based-rendering" style="color: inherit; text-decoration: none;">
  <h2>Iframe-based rendering</h2>
</a>
<p>All the PHPRequestHandler responses must be rendered in an iframe to avoid reloading the page. Remember, the entire setup only lives as long as the main <code>index.html</code>. We want to avoid reloading the main app at all cost.</p>
<p>In our app example above, <code>index.php</code> renders the following HTML:</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">a</span><span class="hl-2"> </span><span class="hl-3">href</span><span class="hl-2">=</span><span class="hl-4">&quot;page.php&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Go to page.php</span><span class="hl-0">&lt;/</span><span class="hl-1">a</span><span class="hl-0">&gt;</span>
</code></pre>
<p>Imagine our <code>index.html</code> rendered it in a <code>&lt;div&gt;</code> instead of an <code>&lt;iframe&gt;</code>. As soon as you clicked on that link, the browser would try to navigate from <code>index.html</code> to <code>page.php</code>. However, <code>index.html</code> runs the entire PHP app including the Worker Thread, the PHPRequestHandler, and the traffic control connecting them to the Service Worker. Navigating away from it would destroy the app.</p>
<p>Now, consider an iframe with the same link in it:</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">iframe</span><span class="hl-2"> </span><span class="hl-3">srcdoc</span><span class="hl-2">=</span><span class="hl-4">&#39;</span><span class="hl-15">&lt;</span><span class="hl-4">a href=&quot;page.php&quot;&gt;Go to page.php</span><span class="hl-15">&lt;</span><span class="hl-4">/a&gt;&#39;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">iframe</span><span class="hl-0">&gt;</span>
</code></pre>
<p>This time, clicking the link the browser to load <code>page.php</code> <strong>inside the iframe</strong>. The top-level index.html where the PHP application runs remains unaffected. This is why iframes are a crucial part of the <code>@php-wasm/web</code> setup.</p>

<a href="#iframes-caveats" id="iframes-caveats" style="color: inherit; text-decoration: none;">
  <h3>Iframes caveats</h3>
</a>
<ul>
<li><code>target=&quot;_top&quot;</code> isn&#39;t handled yet. This means that clicking on <code>&lt;a target=&quot;_top&quot;&gt;Click here&lt;/a&gt;</code> will reload the main browser tab.</li>
<li>JavaScript popup windows originating in the iframe may not work correctly yet.</li>
</ul>

<a href="#php-worker-threads" id="php-worker-threads" style="color: inherit; text-decoration: none;">
  <h2>PHP Worker Threads</h2>
</a>
<p>PHP is always ran in a separate thread we&#39;ll call a &quot;Worker Thread.&quot; This happens to ensure the PHP runtime doesn&#39;t slow down the website.</p>
<p>Imagine the following code:</p>
<pre><code class="language-js"><span class="hl-0">&lt;</span><span class="hl-1">button</span><span class="hl-2"> </span><span class="hl-3">onclick</span><span class="hl-2">=</span><span class="hl-8">&quot;for(let i=0;i&lt;100000000;i++&gt;) {}&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Freeze the page</span><span class="hl-0">&lt;/</span><span class="hl-1">button</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">input</span><span class="hl-2"> </span><span class="hl-3">type</span><span class="hl-2">=</span><span class="hl-8">&quot;text&quot;</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span>
</code></pre>
<p>As soon as you click that button the browser will freeze and you won&#39;t be able to type in the input. That&#39;s just how browsers work. Whether it&#39;s a for loop or a PHP server, running intensive tasks slows down the user interface.</p>

<a href="#initiating-the-worker-thread" id="initiating-the-worker-thread" style="color: inherit; text-decoration: none;">
  <h3>Initiating the worker thread</h3>
</a>
<p>Worker threads are separate programs that can process heavy tasks outside of the main application. They must be initiated by the main JavaScript program living in the browser tab. Here&#39;s how:</p>
<pre><code class="language-ts"><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">phpClient</span><span class="hl-2"> = </span><span class="hl-11">consumeAPI</span><span class="hl-2">&lt;</span><span class="hl-14">PHPClient</span><span class="hl-2">&gt;(</span><br/><span class="hl-2">    </span><span class="hl-11">spawnPHPWorkerThread</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;/worker-thread.js&#39;</span><span class="hl-2">, </span><span class="hl-12">// Valid Worker script URL</span><br/><span class="hl-2">        </span><span class="hl-7">recommendedWorkerBackend</span><span class="hl-2"> </span><span class="hl-12">// &quot;webworker&quot; or &quot;iframe&quot;, see the docstring</span><br/><span class="hl-2">    )</span><br/><span class="hl-2">);</span><br/><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">phpClient</span><span class="hl-2">.</span><span class="hl-11">isReady</span><span class="hl-2">();</span><br/><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">phpClient</span><span class="hl-2">.</span><span class="hl-11">run</span><span class="hl-2">({ </span><span class="hl-7">code:</span><span class="hl-2"> </span><span class="hl-8">`&lt;?php echo &quot;Hello from the thread!&quot;;`</span><span class="hl-2"> });</span>
</code></pre>
<p>Worker threads can use any multiprocessing technique like an iframe, WebWorker, or a SharedWorker (not implemented). See the next sections to learn more about the supported backends.</p>

<a href="#controlling-the-worker-thread" id="controlling-the-worker-thread" style="color: inherit; text-decoration: none;">
  <h3>Controlling the worker thread</h3>
</a>
<p>The main application controls the worker thread by sending and receiving messages. This is implemented via a backend-specific flavor of <code>postMessage</code> and <code>addEventListener(&#39;message&#39;, fn)</code>.</p>
<p>Exchanging messages is the only way to control the worker threads. Remember – it is separate programs. The main app cannot access any functions or variables defined inside of the worker thread.</p>
<p>Conveniently, <a href="api/web.consumeapi.html">consumeAPI</a> returns an easy-to-use API object that exposes specific worker thread features and handles the message exchange internally.</p>

<a href="#worker-thread-backends" id="worker-thread-backends" style="color: inherit; text-decoration: none;">
  <h3>Worker thread backends</h3>
</a>
<p>Worker threads can use any multiprocessing technique like an iframe, WebWorker, or a SharedWorker. This package provides two backends out of the box:</p>

<a href="#webworker" id="webworker" style="color: inherit; text-decoration: none;">
  <h4><code>webworker</code></h4>
</a>
<p>Spins a new <code>Worker</code> instance with the given Worker Thread script. This is the classic solution for multiprocessing in the browser and it almost became the only, non-configurable backend. The <code>iframe</code> backend is handy to work around webworkers limitations in the browsers. For example, <a href="https://github.com/mdn/content/issues/24402">Firefox does not support module workers</a> and <a href="https://github.com/WordPress/wordpress-playground/issues/1">WASM used to crash webworkers in Chrome</a>.</p>
<p>Example usage:</p>
<pre><code class="language-ts"><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">phpClient</span><span class="hl-2"> = </span><span class="hl-11">consumeAPI</span><span class="hl-2">&lt;</span><span class="hl-14">PHPClient</span><span class="hl-2">&gt;(</span><br/><span class="hl-2">    </span><span class="hl-11">spawnPHPWorkerThread</span><span class="hl-2">(</span><span class="hl-8">&#39;/worker-thread.js&#39;</span><span class="hl-2">, </span><span class="hl-8">&#39;webworker&#39;</span><span class="hl-2">)</span><br/><span class="hl-2">);</span>
</code></pre>

<a href="#iframe" id="iframe" style="color: inherit; text-decoration: none;">
  <h4><code>iframe</code></h4>
</a>
<p>Loads the PHPRequestHandler in a new iframe to avoid crashes in browsers based on Google Chrome.</p>
<p>The browser will <strong>typically</strong> run an iframe in a separate thread in one of the two cases:</p>
<ol>
<li>The <code>iframe-worker.html</code> is served with the <code>Origin-Agent-Cluster: ?1</code> header. If you&#39;re running the Apache webserver, this package ships a <code>.htaccess</code> that will add the header for you.</li>
<li>The <code>iframe-worker.html</code> is served from a different origin. For convenience, you could point a second domain name to the same server and directory and use it just for the <code>iframe-worker.html</code>.</li>
</ol>
<p>Pick your favorite option and make sure to use it for serving the <code>iframe-worker.html</code>.</p>
<p>Example usage:</p>
<p><strong>/app.js</strong>:</p>
<pre><code class="language-ts"><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">phpClient</span><span class="hl-2"> = </span><span class="hl-11">consumeAPI</span><span class="hl-2">&lt;</span><span class="hl-14">PHPClient</span><span class="hl-2">&gt;(</span><br/><span class="hl-2">    </span><span class="hl-11">spawnPHPWorkerThread</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;/iframe-worker.html?script=/worker-thread.js&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-8">&#39;iframe&#39;</span><br/><span class="hl-2">    )</span><br/><span class="hl-2">);</span>
</code></pre>
<p><strong>/iframe-worker.html</strong> (Also provided in <code>@php-wasm/web</code> package):</p>
<pre><code class="language-js"><span class="hl-2">&lt;!</span><span class="hl-10">DOCTYPE</span><span class="hl-2"> </span><span class="hl-7">html</span><span class="hl-2">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">html</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  </span><span class="hl-0">&lt;</span><span class="hl-1">head</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">head</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  </span><span class="hl-0">&lt;</span><span class="hl-1">body</span><span class="hl-2"> </span><span class="hl-3">style</span><span class="hl-2">=</span><span class="hl-8">&quot;padding: 0; margin: 0&quot;</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-2">      const script = document.createElement(&#39;script&#39;);</span><br/><span class="hl-2">      script.type = &#39;module&#39;;</span><br/><span class="hl-2">      script.src = getEscapeScriptName();</span><br/><span class="hl-2">      document.body.appendChild(script);</span><br/><br/><span class="hl-2">      function getEscapeScriptName() </span><span class="hl-9">{</span><br/><span class="hl-5">        </span><span class="hl-12">// Grab ?script= query parameter and securely escape it</span><br/><span class="hl-5">      </span><span class="hl-9">}</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  </span><span class="hl-0">&lt;/</span><span class="hl-1">body</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">html</span><span class="hl-0">&gt;</span><br/>
</code></pre>

<a href="#service-workers" id="service-workers" style="color: inherit; text-decoration: none;">
  <h2>Service Workers</h2>
</a>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">A Service Worker</a> is used to handle the HTTP traffic using the in-browser PHPRequestHandler.</p>
<p>Imagine your PHP script renders the following page <a href="#iframe-based-rendering">in the iframe viewport</a>:</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">html</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">head</span><span class="hl-0">&gt;</span><br/><span class="hl-2">        </span><span class="hl-0">&lt;</span><span class="hl-1">title</span><span class="hl-0">&gt;</span><span class="hl-2">John&#39;s Website</span><span class="hl-0">&lt;/</span><span class="hl-1">title</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">head</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">body</span><span class="hl-0">&gt;</span><br/><span class="hl-2">        </span><span class="hl-0">&lt;</span><span class="hl-1">a</span><span class="hl-2"> </span><span class="hl-3">href</span><span class="hl-2">=</span><span class="hl-4">&quot;/&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Homepage</span><span class="hl-0">&lt;/</span><span class="hl-1">a</span><span class="hl-0">&gt;</span><br/><span class="hl-2">        </span><span class="hl-0">&lt;</span><span class="hl-1">a</span><span class="hl-2"> </span><span class="hl-3">href</span><span class="hl-2">=</span><span class="hl-4">&quot;/blog&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Blog</span><span class="hl-0">&lt;/</span><span class="hl-1">a</span><span class="hl-0">&gt;</span><br/><span class="hl-2">        </span><span class="hl-0">&lt;</span><span class="hl-1">a</span><span class="hl-2"> </span><span class="hl-3">href</span><span class="hl-2">=</span><span class="hl-4">&quot;/contact&quot;</span><span class="hl-0">&gt;</span><span class="hl-2">Contact</span><span class="hl-0">&lt;/</span><span class="hl-1">a</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">body</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">html</span><span class="hl-0">&gt;</span>
</code></pre>
<p>When the user clicks, say the <code>Blog</code> link, the browser would normally send a HTTP request to the remote server to fetch the <code>/blog</code> page and then display it instead of the current iframe contents. However, our app isn&#39;t running on the remote server. The browser would just display a 404 page.</p>
<p>Enter <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">Service Workers</a> – a tool to intercept the HTTP requests and handle them inside the browser.</p>

<a href="#service-worker-setup" id="service-worker-setup" style="color: inherit; text-decoration: none;">
  <h3>Service Worker setup</h3>
</a>
<p>The main application living in <code>/index.html</code> is responsible for registering the service worker.</p>
<p>Here&#39;s the minimal setup:</p>
<p><strong>/app.js:</strong></p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> { </span><span class="hl-7">registerServiceWorker</span><span class="hl-2"> } </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-9">function</span><span class="hl-2"> </span><span class="hl-11">main</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-11">registerServiceWorker</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-7">phpClient</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-8">&quot;default&quot;</span><span class="hl-2">, </span><span class="hl-12">// PHP instance scope</span><br/><span class="hl-2">        </span><span class="hl-8">&quot;/sw.js&quot;</span><span class="hl-2">,  </span><span class="hl-12">// Must point to a valid Service Worker implementation.</span><br/><span class="hl-2">        </span><span class="hl-8">&quot;1&quot;</span><span class="hl-2">        </span><span class="hl-12">// Service worker version, used for reloading the script.</span><br/><span class="hl-2">    );</span><br/><br/><span class="hl-2">}</span>
</code></pre>
<p>You will also need a separate <code>/service-worker.js</code> file that actually intercepts and routes the HTTP requests. Here&#39;s what a minimal implementation looks like:</p>
<p><strong>/service-worker.js</strong>:</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> { </span><span class="hl-7">initializeServiceWorker</span><span class="hl-2"> } </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-12">// Intercepts all HTTP traffic on the current domain and</span><br/><span class="hl-12">// passes it to the Worker Thread.</span><br/><span class="hl-11">initializeServiceWorker</span><span class="hl-2">();</span>
</code></pre>

<a href="#cross-process-communication" id="cross-process-communication" style="color: inherit; text-decoration: none;">
  <h2>Cross-process communication</h2>
</a>
<p><code>@php-wasm/web</code> uses the <a href="https://github.com/GoogleChromeLabs/comlink">Comlink</a> library to turns the one-way <code>postMessage</code> available in JavaScript into a two-way communication channel.</p>
<p>If <code>postMessage</code> sounds unfamiliar, it&#39;s what JavaScript threads use to communicate. Please review the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">MDN Docs</a> before continuing.</p>
<p>By default, <code>postMessage</code> does not offer any request/response mechanics. You may send messages to another thread and you may independently receive messages from it, but you can&#39;t send a message and await a response to that specific message.</p>
<p>To quote the <a href="https://github.com/GoogleChromeLabs/comlink">Comlink</a> library documentation:</p>
<p><strong>main.js</strong></p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> </span><span class="hl-9">*</span><span class="hl-2"> </span><span class="hl-6">as</span><span class="hl-2"> </span><span class="hl-7">Comlink</span><span class="hl-2"> </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;https://unpkg.com/comlink/dist/esm/comlink.mjs&#39;</span><span class="hl-2">;</span><br/><span class="hl-9">async</span><span class="hl-2"> </span><span class="hl-9">function</span><span class="hl-2"> </span><span class="hl-11">init</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">worker</span><span class="hl-2"> = </span><span class="hl-9">new</span><span class="hl-2"> </span><span class="hl-11">Worker</span><span class="hl-2">(</span><span class="hl-8">&#39;worker.js&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-12">// WebWorkers use `postMessage` and therefore work with Comlink.</span><br/><span class="hl-2">    </span><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">obj</span><span class="hl-2"> = </span><span class="hl-7">Comlink</span><span class="hl-2">.</span><span class="hl-11">wrap</span><span class="hl-2">(</span><span class="hl-7">worker</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-11">alert</span><span class="hl-2">(</span><span class="hl-8">`Counter: </span><span class="hl-9">${</span><span class="hl-6">await</span><span class="hl-5"> </span><span class="hl-7">obj</span><span class="hl-5">.</span><span class="hl-7">counter</span><span class="hl-9">}</span><span class="hl-8">`</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-7">obj</span><span class="hl-2">.</span><span class="hl-11">inc</span><span class="hl-2">();</span><br/><span class="hl-2">    </span><span class="hl-11">alert</span><span class="hl-2">(</span><span class="hl-8">`Counter: </span><span class="hl-9">${</span><span class="hl-6">await</span><span class="hl-5"> </span><span class="hl-7">obj</span><span class="hl-5">.</span><span class="hl-7">counter</span><span class="hl-9">}</span><span class="hl-8">`</span><span class="hl-2">);</span><br/><span class="hl-2">}</span><br/><span class="hl-11">init</span><span class="hl-2">();</span>
</code></pre>
<p><strong>worker.js</strong></p>
<pre><code class="language-js"><span class="hl-11">importScripts</span><span class="hl-2">(</span><span class="hl-8">&#39;https://unpkg.com/comlink/dist/umd/comlink.js&#39;</span><span class="hl-2">);</span><br/><span class="hl-12">// importScripts(&quot;../../../dist/umd/comlink.js&quot;);</span><br/><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">obj</span><span class="hl-2"> = {</span><br/><span class="hl-2">    </span><span class="hl-7">counter:</span><span class="hl-2"> </span><span class="hl-13">0</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-11">inc</span><span class="hl-2">() {</span><br/><span class="hl-2">        </span><span class="hl-9">this</span><span class="hl-2">.</span><span class="hl-7">counter</span><span class="hl-2">++;</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-7">Comlink</span><span class="hl-2">.</span><span class="hl-11">expose</span><span class="hl-2">(</span><span class="hl-7">obj</span><span class="hl-2">);</span>
</code></pre>
<p>In our case, the exposed object is the <a href="/docs/api/web.phpclient.html">PHPClient</a> instance.</p>

<a href="#scopes" id="scopes" style="color: inherit; text-decoration: none;">
  <h2>Scopes</h2>
</a>
<p>Scopes keep your app working when you open it in two different different browser tabs.</p>
<p>The Service Worker passes the intercepted HTTP requests to the PHPRequestHandler for rendering. Technically, it sends a message through a <a href="https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel"><code>BroadcastChannel</code></a> which then gets delivered to every browser tab where the application is open. This is undesirable, slow, and leads to unexpected behaviors.</p>
<p>Unfortunately, the Service Worker cannot directly communicate with the relevant Worker Thread – see <a href="https://github.com/WordPress/wordpress-playground/pull/31">PR #31</a> and <a href="https://github.com/WordPress/wordpress-playground/issues/9">issue #9</a> for more details.</p>
<p>Scopes enable each browser tab to:</p>
<ul>
<li>Brand the outgoing HTTP requests with a unique tab id</li>
<li>Ignore any <code>BroadcastChannel</code> messages with a different id</li>
</ul>
<p>Technically, a scope is a string included in the <code>PHPRequestHandler.absoluteUrl</code>. For example:</p>
<ul>
<li>In an <strong>unscoped app</strong>, <code>/index.php</code> would be available at <code>http://localhost:8778/wp-login.php</code></li>
<li>In an <strong>scoped app</strong>, <code>/index.php</code> would be available at <code>http://localhost:8778/scope:96253/wp-login.php</code></li>
</ul>
<p>The service worker is aware of this concept and will attach the <code>/scope:</code> found in the request URL to the related <code>BroadcastChannel</code> communication.</p>
<p>To use scopes, initiate the worker thread with a scoped <code>absoluteUrl</code>:</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-7">PHP</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">setURLScope</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">exposeAPI</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">parseWorkerStartupOptions</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-8">&#39;@php-wasm/web&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-12">// Don&#39;t use the absoluteURL directly:</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">absoluteURL</span><span class="hl-2"> = </span><span class="hl-8">&#39;http://127.0.0.1&#39;</span><br/><br/><span class="hl-12">// Instead, set the scope first:</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">scope</span><span class="hl-2"> = </span><span class="hl-7">Math</span><span class="hl-2">.</span><span class="hl-11">random</span><span class="hl-2">().</span><span class="hl-11">toFixed</span><span class="hl-2">(</span><span class="hl-13">16</span><span class="hl-2">)</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">scopedURL</span><span class="hl-2"> = </span><span class="hl-11">setURLScope</span><span class="hl-2">(</span><span class="hl-7">absoluteURL</span><span class="hl-2">, </span><span class="hl-7">scope</span><span class="hl-2">).</span><span class="hl-11">toString</span><span class="hl-2">()</span><br/><br/><span class="hl-9">const</span><span class="hl-2"> { </span><span class="hl-10">phpVersion</span><span class="hl-2"> } = </span><span class="hl-11">parseWorkerStartupOptions</span><span class="hl-2">&lt;{ </span><span class="hl-7">phpVersion</span><span class="hl-2">?: </span><span class="hl-14">string</span><span class="hl-2"> }&gt;();</span><br/><span class="hl-9">const</span><span class="hl-2"> </span><span class="hl-10">php</span><span class="hl-2"> = </span><span class="hl-6">await</span><span class="hl-2"> </span><span class="hl-10">PHP</span><span class="hl-2">.</span><span class="hl-11">load</span><span class="hl-2">(</span><span class="hl-8">&#39;8.0&#39;</span><span class="hl-2">, {</span><br/><span class="hl-2">    </span><span class="hl-7">requestHandler:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-7">documentRoot:</span><span class="hl-2"> </span><span class="hl-8">&#39;/&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-7">absoluteUrl:</span><span class="hl-2"> </span><span class="hl-7">scopedSiteUrl</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-12">// Expose the API to app.ts:</span><br/><span class="hl-9">const</span><span class="hl-2"> [</span><span class="hl-10">setApiReady</span><span class="hl-2">, ] = </span><span class="hl-11">exposeAPI</span><span class="hl-2">( </span><span class="hl-7">php</span><span class="hl-2"> );</span><br/><span class="hl-11">setApiReady</span><span class="hl-2">();</span>
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current"><a href="../modules.html">wp-<wbr/>playground</a>
<ul>
<li class="current pages-entry pages-entry-menu pages-entry-depth-1"><a>Playground</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="index.html">Start here</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="embedding-wordpress-playground-on-other-websites.html">Embedding <wbr/>Word<wbr/>Press playground-<wbr/>on other websites</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="blueprints-getting-started.html">Blueprints: <wbr/>Getting started</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="blueprints-reference.html">Blueprints: <wbr/>Reference</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="index-html-vs-remote-html.html">Comparing remote.html and index.html</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="using-php-in-javascript.html">Using PHP in <wbr/>Java<wbr/>Script</a></li>
<li class="current selected pages-entry pages-entry-page pages-entry-depth-2"><a href="using-php-in-the-browser.html">Using PHP in the browser</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="bundling-wordpress-for-the-browser.html">Bundling <wbr/>Word<wbr/>Press for the browser</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="running-wordpress-in-the-browser.html">Running <wbr/>Word<wbr/>Press in the browser</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="service-worker.html">Service workers</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="wordpress-plugin-ide.html">Word<wbr/>Press plugin IDE</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/_php_wasm_node.html">@php-<wbr/>wasm/node</a></li>
<li class="tsd-kind-module"><a href="../modules/_php_wasm_progress.html">@php-<wbr/>wasm/progress</a></li>
<li class="tsd-kind-module"><a href="../modules/_php_wasm_universal.html">@php-<wbr/>wasm/universal</a></li>
<li class="tsd-kind-module"><a href="../modules/_php_wasm_util.html">@php-<wbr/>wasm/util</a></li>
<li class="tsd-kind-module"><a href="../modules/_php_wasm_web.html">@php-<wbr/>wasm/web</a></li>
<li class="tsd-kind-module"><a href="../modules/_wp_playground_blueprints.html">@wp-<wbr/>playground/blueprints</a></li>
<li class="tsd-kind-module"><a href="../modules/_wp_playground_client.html">@wp-<wbr/>playground/client</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="../assets/main.js"></script></body></html>